<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calendario de Adviento 2025</title>
<style>
  :root{
    --bg:#F5EFE6; --red:#570000; --green:#194D33; --caramel:#B78A58; --text:#2B2B2B; --gold:#C9A04B;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: Georgia, serif; 
  background: 
    url('https://www.transparenttextures.com/patterns/asfalt-light.png'),
    linear-gradient(180deg, #5a0000 0%, #320000 100%);
  background-size: auto, cover;

    color:var(--text);
    -webkit-font-smoothing:antialiased; min-height:100vh; position:relative;
  }

  header {padding: 10px 20px 4px; text-align: center;}

  header h1 {
    position: relative;
    margin: 17px 0 0;
    font-size: 3.6rem;
    letter-spacing: 1.3px;
    font-weight: 700;

    /* üé® Color crema c√°lido + degradado dorado estilo Disney cl√°sico */
    background-image:
      linear-gradient(180deg,
        #fff5d8 0%,
        #f3d9a2 45%,
        #eac27a 70%,
        #f6e4bf 100%
      ),
      url('https://www.transparenttextures.com/patterns/light-paper-fibers.png');
    background-size: cover;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;

    /* üåü Contorno y brillo c√°lido (sombra Disney 1950) */
    text-shadow:
      2px 2px 3px rgba(80,40,10,0.6),
      0 0 12px rgba(255,230,185,0.55),
      0 0 25px rgba(255,210,150,0.35);

    /* üé¨ Animaci√≥n elegante tipo "Disney Golden Era" */
    animation: titleDisney50 1.2s cubic-bezier(.26,1.4,.38,1) both;
  }

  @keyframes titleDisney50 {
    0% {
      opacity: 0;
      transform: translateY(-18px) scale(0.92) rotate(-1deg);
      text-shadow:
        0 0 0 rgba(80,40,10,0.0),
        0 0 0 rgba(255,230,185,0.0),
        0 0 0 rgba(255,210,150,0.0);
    }
    60% {
      opacity: 1;
      transform: translateY(6px) scale(1.04) rotate(1deg);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1) rotate(0deg);
    }
  }

  /* ‚ú® Brillo m√°gico suave estilo ‚ÄúDisney Classic Title Shine‚Äù */
  header h1::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      115deg,
      transparent 0%,
      rgba(255,255,255,0.45) 50%,
      transparent 100%
    );
    opacity: 0;
    transform: translateX(-120%) skewX(-5deg);
    pointer-events: none;
    border-radius: 4px;
  }

  header h1:hover::after {
    animation: disneyShine 1.6s ease;
  }

  @keyframes disneyShine {
    0% { opacity: 0; transform: translateX(-130%) skewX(-5deg); }
    40% { opacity: 0.6; }
    100% { opacity: 0; transform: translateX(130%) skewX(-5deg); }
  }


  /* snow container (over everything) */
  .snow-area { position:fixed; inset:0; pointer-events:none; z-index:998; overflow:hidden; }

  /* calendar grid */
  .calendar-container{
    width:100%; max-width:720px; margin:16px auto; padding:16px;
    display:grid; gap:10px;
    /* default columns for mobile mosaic */
    grid-template-columns: repeat(4,1fr);
  }
  @media(min-width:900px){
    .calendar-container{ grid-template-columns: repeat(8,1fr); max-width:1100px; }
  }

  .day{
    background:linear-gradient(#fff0ed,#f6e9e2);
    color:var(--red);
    border-radius:14px; padding:16px; display:flex; align-items:center; justify-content:center;
    font-family: 'Playfair Display', Georgia, serif; font-size:2.35rem; font-weight:700;
    text-shadow: 0 2px 8px rgba(255,255,255,0.9), 0 0 20px rgba(255,240,237,0.8);  /* ‚¨ÖÔ∏è A√ëADIR ESTA L√çNEA */
    border:2px solid rgba(0,0,0,0.06); cursor:pointer; position:relative; overflow:hidden;
    min-height:72px; box-shadow:0 4px 12px rgba(11,8,6,0.06);
    transition: transform .18s ease, box-shadow .18s ease;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;  animation: softPop .4s ease;
}

@keyframes softPop {
  0% { opacity: 0; transform: scale(.9); }
  100% { opacity: 1; transform: scale(1); }
}
  .day:hover{ transform:translateY(-4px); box-shadow:0 10px 26px rgba(11,8,6,0.12); }

  /* sizes */
  .w2{ grid-column: span 2; }
  .h2{ grid-row: span 2; min-height:150px; }

  /* subtle paper texture overlay (CSS only) */
  .day::before{
    content:''; position:absolute; inset:0; background-image:linear-gradient(transparent, rgba(0,0,0,0.01));
    mix-blend-mode:multiply; pointer-events:none; opacity:.9;
  }

  /* shine sweep */
  .day::after{
    content:''; position:absolute; top:-60%; left:-60%; width:220%; height:220%;
    background: linear-gradient(120deg, rgba(255,255,255,0.45) 0%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.45) 100%);
    transform: rotate(25deg) translateX(-100%); transition: transform 1.2s ease;
    pointer-events:none;
  }
  .day:hover::after{ transform: rotate(25deg) translateX(100%); }

  /* AJUSTE PARA EL D√çA 25 */
  .small-emoji {
    font-size: 0.85em; /* Ligeramente m√°s peque√±o que el texto del t√≠tulo */
    margin-right: 4px;
    vertical-align: middle;
  }

  /* locked overlay mark (small) */
  .day.locked::before{
    content:'üîí'; position:absolute; right:8px; top:8px; font-size:0.9rem; opacity:0.55;
    z-index:1; mix-blend-mode:normal;
  }

  /* modal background + content */
  .modal-bg{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background: linear-gradient(rgba(10,8,6,0.35), rgba(10,8,6,0.35)); z-index:1000; padding:18px;
  }
  .modal{
    width:100%; max-width:640px; background: #fff6ea; border-radius:14px; padding:18px;
    box-shadow:0 20px 60px rgba(0,0,0,0.45); transform-origin:center; position:relative;
  }
  .modal h2{ margin:0 0 10px 0; font-family:'Playfair Display', Georgia, serif; color:var(--red) }
  .modal p{ margin:0 0 12px 0; line-height:1.5; color:var(--text) }
  .modal .close{ 
    position:absolute; 
    right:12px; 
    top:10px; 
    background:var(--red); 
    color:white; 
    border:none; 
    padding:8px; 
    border-radius:8px; 
    cursor:pointer; 
    font-size: 22px;
    line-height: 1; 
  }

  /* modal open animation (pop) */
  .modal.pop {
  animation: modalSmooth .35s ease both;
}

@keyframes modalSmooth {
  0% {
    opacity: 0;
    transform: translateY(10px) scale(0.97);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

  /* locked modal style (elegante) */
  .locked-modal { text-align:center; padding:20px; }
  .locked-modal .icon { font-size:44px; margin-bottom:12px; }

  /* sparkle burst (from clicked day) */
  .sparkle {
    position:fixed; width:18px; height:18px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #fff 0%, var(--gold) 40%, rgba(201,160,75,0.9) 60%);
    pointer-events:none; z-index:1002; filter:drop-shadow(0 6px 12px rgba(201,160,75,0.18));
    transform-origin:center;
    animation: sparkleUp .7s forwards;
  }
  @keyframes sparkleUp {
    0% { opacity:1; transform: translateY(0) scale(.6) rotate(0deg); }
    60% { opacity:1; transform: translateY(-28vh) scale(1.2) rotate(180deg); }
    100% { opacity:0; transform: translateY(-45vh) scale(.3) rotate(360deg); }
  }

  /* small helper */
  .muted { font-size:0.9rem; color:#6b5a4e }

  /* casilla 25 especial */
  .day.day25 {
    grid-column: span 2; grid-row: span 2;
    color: var(--red); font-size:2.45rem; border:3px solid rgba(201,160,75,0.9);
    box-shadow:0 12px 40px rgba(201,160,75,0.12);
    display:flex; align-items:center; justify-content:center; gap:10px;
  }
  .day.day25:hover::after{ background: linear-gradient(120deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.2) 100%); }

/* Hover elegante, muy sutil */
#musicToggle:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 14px rgba(0,0,0,0.28);
}

/* Feedback cl√°sico al presionar */
#musicToggle:active {
  transform: scale(0.97);
}

/* Brillo vintage MUY suave pasando por el bot√≥n */
#musicToggle::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 8px;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(255,255,255,0.35) 50%,
    transparent 100%
  );
  opacity: 0;
  transform: translateX(-100%);
  transition: transform 1.2s ease, opacity .5s ease;
  pointer-events: none;
}

#musicToggle:hover::after {
  opacity: 0.45;
  transform: translateX(100%);
}

/* üÜï MEDIA QUERY PARA TEL√âFONOS M√ìVILES (esto ya estaba y est√° bien) */
@media(max-width: 480px) {
  #musicToggle {
    padding: 10px 18px; 
    font-size: 1.0rem;  
    left: 8px;          
    bottom: 8px;
  }
}

</style>
</head>
<body>

<header><h1>Calendario de Adviento</h1></header>

<div id="snowArea" class="snow-area" aria-hidden="true"></div>

<main>
  <section class="calendar-container" id="calendar">
    <div class="day w2" data-day="1">1</div>       <div class="day" data-day="2">2</div>           <div class="day" data-day="3">3</div>           <div class="day h2" data-day="4">4</div>        <div class="day" data-day="5">5</div>           <div class="day" data-day="6">6</div>           <div class="day" data-day="7">7</div>           <div class="day w2" data-day="8">8</div>       <div class="day" data-day="9">9</div>           <div class="day" data-day="10">10</div>         <div class="day h2" data-day="11">11</div>      <div class="day" data-day="12">12</div>         <div class="day" data-day="13">13</div>         <div class="day" data-day="14">14</div>         <div class="day" data-day="15">15</div>         <div class="day" data-day="16">16</div>         <div class="day" data-day="17">17</div>         <div class="day" data-day="18">18</div>         <div class="day" data-day="19">19</div>         <div class="day h2" data-day="20">20</div>       <div class="day w2" data-day="21">21</div>         <div class="day" data-day="22">22</div>      <div class="day" data-day="23">23</div>         <div class="day" data-day="24">24</div>      <div class="day day25" data-day="25">25 üéÑ</div>
  </section>
</main>

<div class="modal-bg" id="modalBg" aria-hidden="true">
  <div class="modal" id="modal">
    <button class="close" id="closeBtn">&times;</button>
    <div id="modalInner">
      <h2 id="modalTitle"></h2>
      <p id="modalText"></p>
      <div id="modalExtra" class="muted"></div>
    </div>
  </div>
</div>

<audio id="bgMusic" loop preload="auto">
  <source src="Sounds/Music.mp3" type="audio/mpeg">
</audio>
<audio id="bellSound" preload="auto">
  <source src="Sounds/Bells.mp3" type="audio/mpeg">
</audio>

<button id="musicToggle" aria-pressed="false"
style="
  position:fixed;
  left:12px;
  bottom:12px;
  z-index:2000;
  background: linear-gradient(135deg, #1d5f2c, #0d3b19);  /* Verde vintage profundo */
  color:#fff;
  border:2px solid #0a2a11; /* l√≠nea de tinta estilo cartoon */
  padding:10px 16px; /* ‚úÖ AUMENTADO */
  border-radius:8px;
  cursor:pointer;
  font-size:1.1rem; /* ‚úÖ AUMENTADO */
  letter-spacing:0.3px;  /* toque retro */
  box-shadow:0 2px 5px rgba(0,0,0,0.25);
  transition: 
    transform .18s ease, 
    box-shadow .18s ease, 
    opacity .2s ease;">
  üîá M√∫sica
</button>



<script>
/* ---------- UTIL ---------- */
const urlParams = new URLSearchParams(location.search);
const FORCE_UNLOCK = urlParams.get('unlock') === 'true'; // s√≥lo para pruebas si lo necesitas
const today = new Date().getDate(); // fecha del dispositivo

/* ---------- SAMPLE CONTENT (1-25) ---------- */
const content = {
  /*‚úì*/ 1: { title:"D√≠a 1 ‚Äî Inicio", text:"¬°Bienvenid@ al Calendario de Adviento! Cada d√≠a habr√° peque√±as sorpresas no te olvides de venir cada d√≠a para poder ver lo que te espera. ‚ò∫Ô∏è <br>¬°Para empezar, juega con los elfos de Pap√° Noel! El taller se actualiza cada d√≠a con un juego nuevo. Es como otro calendario de adviento... Pero lleno de juegos üéÖ", link:"https://santatracker.google.com/intl/es/", funFact:"El primer calendario de Adviento ilustrado se imprimi√≥ en 1902 en Alemania.", image:"Img-Cal/dia1.jpg"},
  /*‚úì*/ 2: { title:"D√≠a 2 ‚Äî Nota", text:"La magia de la Navidad est√° en darnos cuenta de la belleza que existe, incluso cuando hace fr√≠o. Un momento de paz, un caf√©. Disfruta la pausa de hoy.", link:"https://youtu.be/z0LSbbQs2CU", funFact:"El acebo se usaba en invierno desde la antig√ºedad para simbolizar protecci√≥n y buena fortuna.", image:"Img-Cal/dia2.jpg"},
  /*‚úì*/ 3: { title:"D√≠a 3 ‚Äî Playlist", text:"M√∫sica de fondo: Este √°lbum (o playlist) es perfecto para poner mientras cocinas o simplemente te relajas. Sube un poco el volumen y deja que te acompa√±e. üéß", link:"https://youtube.com/playlist?list=PLXgUstcYt9KvSLpyxNf2UDWmT8D9zY8hY&si=Y8PjDEMM44vbyNyz", funFact:"La canci√≥n \"Have Yourself A Merry Little Christmas\" naci√≥ en 1943 para llevar consuelo en plena Segunda Guerra Mundial.", image:"Img-Cal/dia3.jpg"},
  /*‚úì*/ 4: { title:"D√≠a 4 ‚Äî Mensaje", text:"Si las cosas se sienten abrumadoras, mira las luces. A veces solo hace falta un peque√±o brillo para recordarnos que todo estar√° bien. Te env√≠o un abrazo fuerte.", link:"https://youtu.be/8rPDxhLelNk", funFact:"Las primeras luces de Navidad se usaban con velas y se colocaban en ventanas para decorar.", image:"Img-Cal/dia4.jpg"},
  /*‚úì*/ 5: { title:"D√≠a 5 ‚Äî Juego: Memory", text:"Hoy toca Memory Navide√±o. Ideal para desconectar un rato y ejercitar la mente. Si juegas con alguien, ¬°mejor! A ver qui√©n tiene la mejor memoria. üòâ", link:"https://www.memo-juegos.com/memory-gigantes/juego-de-memory-gigante-navidad", funFact:"Los juegos navide√±os eran populares en Europa desde el siglo XIX.", image:"Img-Cal/dia5.jpg"},
  /*‚úì*/ 6: { title:"D√≠a 6 ‚Äî Receta: Chocolate", text:"Chocolate caliente estilo franc√©s. ¬°M√°s f√°cil de lo que parece! Mira el v√≠deo para el paso a paso.<br><br><strong>Ingredientes:</strong><br>- 500ml leche de vaca o vegetal<br>- 150g chocolate semiamargo<br>- 1-2 rajas de canela<br>- 1 cdta az√∫car<br>- 1 cdta vainilla<br>- 1 cda cacao<br>- 1 cda cocoa<br>- 1/4 cdta de sal<br><br><strong>Tip:</strong> Mu√©velo constantemente para que no se queme ni se pegue.", link:"https://youtu.be/1wD9OLIXxks", funFact:"El chocolate caliente se populariz√≥ en Europa en el siglo XVII.", image:"Img-Cal/dia6.jpg"},
  /*‚úì*/ 7: { title:"D√≠a 7 ‚Äî Actividad: Fotos", text:"T√≥mate 5 fotos a lo largo del d√≠a. Por la noche, escribe qu√© te ha gustado de cada una y por qu√© la tomaste. ¬°Un diario visual! ‚ú® Tip Sencillo de Foto: No te quedes a la altura de los ojos. Prueba a agacharte o a elevar el m√≥vil; ¬°cambiar la perspectiva es el secreto!", link:"https://youtu.be/flr8vDQ9Wuc", funFact:"La fotograf√≠a consciente ayuda a prestar m√°s atenci√≥n a los peque√±os detalles de la vida diaria.", image:"Img-Cal/dia7.jpg"},
  /*‚úì*/ 8: { title:"D√≠a 8 ‚Äî Video: Pantera Rosa", text:"¬øUna buena <strong>sesi√≥n</strong> de dibujos? Mira este especial de Navidad de la Pantera Rosa. Corto, <strong>curioso</strong> y con ese toque nost√°lgico que necesitamos.", link:"https://youtu.be/Dt9UPRzRCAY", funFact:"El especial navide√±o 'A Pink Christmas' se emiti√≥ casi tres d√©cadas despu√©s de que la serie original dejara de emitirse.", image:"Img-Cal/dia8.jpg"},
  /*‚úì*/ 9: { title:"D√≠a 9 ‚Äî Reto: Limpieza", text:"Reto de Despeje. Deshazte de lo que ya no te suma (f√≠sico o digital). Empieza a hacer espacio para lo bueno que trae el A√±o Nuevo.", link:"https://youtu.be/zF2zZXR6dQ0", funFact:"Reflexionar sobre gratitud aumenta la felicidad durante las fiestas.", image:"Img-Cal/dia9.jpg"},
  /*‚úì*/ 10: { title:"D√≠a 10 ‚Äî Consejo", text:"A veces, el mejor regalo que podemos darnos es una pausa. Perm√≠tete ese momento de calma en tu d√≠a. (¬°Dale play a la m√∫sica de fondo!)", link:"https://youtu.be/igJo0voxIJ4", funFact:"Tomarse momentos de descanso mejora el bienestar y la conexi√≥n con la familia.", image:"Img-Cal/dia10.jpg"}, 
  /*‚úì*/ 11: { title:"D√≠a 11 ‚Äî Receta: Galletas", text:"Galletas de Mantequilla Navide√±as. ¬°Un cl√°sico f√°cil para decorar! Mira el v√≠deo para el paso a paso.<br><br><strong>Ingredientes:</strong><br>- 160g de Az√∫car<br><br>- 125g de Mantequilla sin sal (a temperatura ambiente)<br>- Ralladura de 1 lim√≥n<br>- Una pizca de sal<br>- 2 Huevos<br>- 450g de Harina de trigo<br>- 16g de levadura quimica (normalmente un sobre de royal es perfecto)<br>- No guardes la harina aun la necesitas para amasar üëÄ<br><br><strong>Tip:</strong> Deja reposar la masa envuelta en papel film en la nevera por 30 minutos. Hornea a 180¬∞C (350¬∞F) por unos 10-12 minutos.", link:"https://youtu.be/Xc26yOBHr40", funFact:"La tradici√≥n de hornear galletas en Navidad proviene de los rituales alemanes medievales.", image:"Img-Cal/dia11.jpg"}, 
  /*‚úì*/ 12: { title:"D√≠a 12 ‚Äî Tarea", text:"Cada vez falta menos para Navidad... ¬øA√∫n no has montado el √°rbol? ¬°A qu√© esperas! Y si ya lo has montado... ¬øQue tal si le das un toque m√°s original?", link:"https://youtube.com/playlist?list=PLJIUlx-Hso9pJQgIi4tq2agMXoKKKAAWd&si=h3bzGgmV6JKQJk_1", funFact:"Hacer manualidades reduce el estr√©s y aumenta la sensaci√≥n de logro personal.", image:"Img-Cal/dia12.jpg"},
  /*‚úì*/ 13: { title:"D√≠a 13 ‚Äî Playlist Chill", text:"Hoy toca una selecci√≥n de m√∫sica sin letra, ideal para concentrarte o simplemente relajarte con un buen chocolate caliente.", link:"https://youtu.be/42vwGaFe4T8", funFact:"Las listas de m√∫sica para el estudio se han popularizado como una herramienta para mejorar la concentraci√≥n.", image:"Img-Cal/dia13.jpg"},
  /*‚úì*/ 14: { title:"D√≠a 14 ‚Äî Mensaje", text:"La Navidad se hace especial por los detalles peque√±os: un olor, una canci√≥n, la luz de una vela. Mira a tu alrededor con atenci√≥n hoy, seguro encuentras algo que te haga sonre√≠r.", link:"https://youtu.be/C4oI7GXdDsM", funFact:"Los adornos m√°s antiguos eran hechos a mano por cada familia.", image:"Img-Cal/dia14.jpg"},
  /*‚úì*/ 15: { title:"D√≠a 15 ‚Äî ¬°Carta Especial!", text:"Una carta solo para ti, llena de cari√±o. √Åbrela, l√©ela y recuerda lo especial que eres. ‚ù§Ô∏è", link:"https://unacartaespecial.my.canva.site/", funFact:"Enviar una carta escrita a mano o dise√±ada con cari√±o es una tradici√≥n que se remonta a siglos atr√°s, creando un recuerdo tangible y valioso.", image:"Img-Cal/dia15.jpg"},
  /*‚úì*/ 16: { title:"D√≠a 16 ‚Äî Receta: Panettone", text:"¬°El gran reto! Un Panettone casero con una masa suave que se deshace en la boca. Mira el v√≠deo para el paso a paso detallado.<br><br><strong>Ingredientes:</strong><br>- 3 Huevos<br>- 3 cdas de Mantequilla<br>- 10g de Levadura seca<br>- 120g de Az√∫car<br>- 1 cda de Extracto de vainilla<br>- 250g de Agua tibia<br>- 500g de Harina com√∫n<br>- 1/2 taza de Chispas de chocolate (opcional)<br><br><strong>Tip:</strong> Deja reposar la masa en el molde durante 30 minutos (hasta que doble su tama√±o) antes de hornear a 180¬∞C por unos 40 minutos.", link:"https://youtu.be/5gL_Cp0kzNQ", funFact:"El Panettone es tradicionalmente de Mil√°n (Italia) y se consume en Navidad en muchos pa√≠ses.", image:"Img-Cal/dia16.jpg"},  
  /*‚úì*/ 17: { title:"D√≠a 17 ‚Äî Postales Navide√±as", text:"¬°Momento de compartir! Aqu√≠ tienes una colecci√≥n de postales navide√±as <strong>dise√±adas para m√≥vil</strong> que puedes descargar y enviar a tus seres queridos. ¬°Un detalle r√°pido y lleno de cari√±o! üì±üíå", link:"https://www.canva.com/design/DAG6SSXbgDo/8y72cXO2WQ6rXH4XTmBy0g/view?utm_content=DAG6SSXbgDo&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h87a38586d2", funFact:"Enviar postales navide√±as en formato digital es una tradici√≥n moderna que se populariz√≥ con la llegada de internet, pero la costumbre de enviar tarjetas se remonta a 1843.", image:"Img-Cal/dia17.jpg"},
  /*‚úì*/ 18: { title:"D√≠a 18 ‚Äî Corto: Tom y Jerry", text:"¬°Un cl√°sico de la infancia! T√≥mate un descanso y disfruta de este divertido corto navide√±o de Tom y Jerry, lleno de travesuras festivas. üé¨", link:"https://youtu.be/0OdBlnbaPBs", funFact:"El primer corto de Tom y Jerry fue lanzado en 1940, y sus especiales navide√±os se convirtieron en un favorito de la televisi√≥n familiar.", image:"Img-Cal/dia18.jpg"},
  /*‚úì*/ 19: { title:"D√≠a 19 ‚Äî Nota", text:"Si hoy te sientes cansado o la energ√≠a no te da, est√° bien. La vida tiene sus d√≠as. T√≥mate el tiempo que necesites para ti. El descanso es parte del proceso.", link:"https://youtu.be/IaaiV68JNCM", funFact:"La auto-compasi√≥n aumenta la resiliencia durante tiempos estresantes.", image:"Img-Cal/dia19.jpg"},
  /*‚úì*/ 20: { title:"D√≠a 20 ‚Äî Juego: Puzzle", text:"T√≥mate un respiro para armar este Puzzle Navide√±o. Es una actividad relajante y una buena excusa para desconectar un rato del m√≥vil. üß©", link:"https://puzzlefactory.com/es/rompecabezas-navidad/299348-pueblo-en-navidad-rompecabezas#7x6", funFact:"Los puzzles son excelentes para ejercitar la mente y la paciencia.", image:"Img-Cal/dia20.jpg"}, 
  /*‚úì*/ 21: { title:"D√≠a 21 ‚Äî Corto: Mickey", text:"Cl√°sico y nost√°lgico. Mira 'Mickey's Christmas Carol'. Hazte unas palomitas y disfruta de este recuerdo de la infancia.", link:"https://www.canva.com/design/DAG6TfPaQII/u3kxjsRAlS_eMtJXsUguXQ/watch?utm_content=DAG6TfPaQII&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h245f8616e9", funFact:"Este corto combina humor y tradici√≥n navide√±a de manera atemporal, adaptando la obra de Dickens.", image:"Img-Cal/dia21.jpg"}, 
  /*‚úì*/ 22: { title:"D√≠a 22 ‚Äî Actividad: Detalle", text:"Hoy el reto es tener un detalle bonito con alguien, ya sea halagando su ropa, felicitando su trabajo o simplemente dedic√°ndole una sonrisa sincera. ¬°Regala un buen momento!", link:"https://youtu.be/rBrd_3VMC3c", funFact:"Tener peque√±os gestos de amabilidad aumenta tu felicidad y la de los dem√°s.", image:"Img-Cal/dia22.jpg"}, 
  /*‚úì*/  23: { title:"D√≠a 23 ‚Äî Reto: Vision Board", text:"Dedica un rato a pensar c√≥mo quieres que sea tu pr√≥ximo a√±o. El <em>vision board</em> ayuda visualmente a que te centres en tus metas. <strong>Nota Importante:</strong> Recuerda que nada cae del cielo; es la <strong>actitud y el esfuerzo</strong> que le dediques lo que realmente lograr√° tus objetivos. Aqu√≠ tienes un tutorial r√°pido para inspirarte: ", link:"https://youtu.be/oXyxYzYZgsg", funFact:"Crear un Vision Board ayuda a visualizar metas y mantener la motivaci√≥n a largo plazo.", image:"Img-Cal/dia23.jpg"},
  /*‚úì*/  24: { title:"D√≠a 24 ‚Äî Pel√≠cula", text:"¬°Ya casi es Navidad! Hoy te toca una peli. Prepara mantas y chocolate caliente para ver este clasico Navide√±o: El Cascanueces. üé¨", link:"https://www.canva.com/design/DAG6TCwBeYk/zNrpkFaArjKLB8kmR4MU1Q/watch?utm_content=DAG6TCwBeYk&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=hbf1f9e7e96", funFact:"Las pel√≠culas navide√±as se han convertido en una tradici√≥n moderna desde mediados del siglo XX.", image:"Img-Cal/dia24.jpg"},
  /*‚úì*/ 25: { 
    title:"<span class='small-emoji'>üéÑ</span> D√≠a 25 ‚Äî ¬°Feliz Navidad!", 
    text:"¬°Llegamos! Gracias por seguirme en este calendario. Mi regalo para ti es este corto que hice con mucho cari√±o. Dale play y disfruta. ¬°Feliz Navidad! ‚ù§Ô∏è", 
    link:"https://unacartaespecial.my.canva.site/navidad", 
    funFact:"El √°rbol de Navidad m√°s grande del mundo se encuentra en R√≠o de Janeiro, Brasil.", 
    image:"Img-Cal/dia25.jpg"
  }
};

/* ---------- NIEVE (crea elementos con movimiento) ---------- */
(function startSnow(){
  const area = document.getElementById('snowArea');
  if(!area) return;
  function make(){
    const el = document.createElement('div');
    el.textContent = '‚ùÑ';
    el.style.position='absolute';
    el.style.left = Math.random()*100+'%';
    el.style.top = '-2%';
    const size = (Math.random()*14 + 8).toFixed(0) + 'px';
    el.style.color = 'var(--bg)';
    el.style.fontSize = size;
    el.style.opacity = (Math.random()*0.6 + 0.25).toFixed(2);
    el.style.transform = `translateY(0)`;
    el.style.pointerEvents='none';
    const duration = (Math.random()*6 + 6).toFixed(1);
    el.style.transition = `transform ${duration}s linear, opacity ${duration}s linear`;
    area.appendChild(el);
    requestAnimationFrame(()=> {
      el.style.transform = `translateY(${window.innerHeight + 80}px) translateX(${(Math.random()*80 - 40)}px) rotate(${Math.random()*360}deg)`;
      el.style.opacity = 0;
    });
    setTimeout(()=> el.remove(), (parseFloat(duration)+0.6)*1000);
  }
  // interval ajustado para rendimiento
  setInterval(make, 300);
})();

/* ---------- UI + INTERACCIONES ---------- */
const calendar = document.getElementById('calendar');
const header = document.querySelector('header'); 
const modalBg = document.getElementById('modalBg');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modalTitle');
const modalText = document.getElementById('modalText');
const modalExtra = document.getElementById('modalExtra');
const closeBtn = document.getElementById('closeBtn');

const bellSound = document.getElementById('bellSound');
const bgMusic = document.getElementById('bgMusic');
const musicToggle = document.getElementById('musicToggle');
let musicPlaying = true;

// AUTOPLAY SEGURO ‚Äî empieza al primer clic o toque del usuario
function startMusic() {
  bgMusic.play().then(() => {
    musicToggle.textContent = 'üîä M√∫sica';
    musicToggle.setAttribute('aria-pressed','true');
  }).catch(()=>{});

  // üÜï Eliminamos listeners para que solo se ejecute UNA vez
  document.removeEventListener('click', startMusic);
  document.removeEventListener('touchstart', startMusic);
  header.removeEventListener('click', startMusic);
  header.removeEventListener('touchstart', startMusic);
}

// üÜï A√±adimos listeners: Se activa con cualquier clic, incluyendo el t√≠tulo.
document.addEventListener('click', startMusic, { once: true });
document.addEventListener('touchstart', startMusic, { once: true });
header.addEventListener('click', startMusic, { once: true }); 
header.addEventListener('touchstart', startMusic, { once: true });


/* music toggle */
musicToggle.addEventListener('click', () => {
  musicPlaying = !musicPlaying;
  if(musicPlaying){
    bgMusic.play().catch(()=>{/* autoplay blocked ‚Äî user must interact, fine */});
    musicToggle.textContent = 'üîä M√∫sica';
    musicToggle.setAttribute('aria-pressed','true');
  } else {
    bgMusic.pause();
    musicToggle.textContent = 'üîá M√∫sica';
    musicToggle.setAttribute('aria-pressed','false');
  }
});

/* sparkle visual */
function createSparkle(x,y){
  const s = document.createElement('div');
  s.className='sparkle';
  s.style.left = (x - 9) + 'px';
  s.style.top  = (y - 9) + 'px';
  document.body.appendChild(s);
  setTimeout(()=> s.remove(), 900);
}

/* show modal (unlocked) */
function showModalFor(dayNum, clickEvent){
  if(clickEvent) createSparkle(clickEvent.clientX, clickEvent.clientY);
  
  const item = content[dayNum];
  modalTitle.textContent = item.title || `D√≠a ${dayNum}`;
  modalText.innerHTML = item.text || '';
  
  // Mostrar link y dato curioso
  modalExtra.innerHTML = '';
  if(item.link) {
    const a = document.createElement('a');
    a.href = item.link;
    a.target = "_blank";
    a.textContent = "üîó Ver enlace";
    a.style.display = "block";
    a.style.marginBottom = "6px";
    modalExtra.appendChild(a);
  }
  if(item.funFact){
    const f = document.createElement('div');
    f.textContent = `üí° Curiosidad: ${item.funFact}`;
    modalExtra.appendChild(f);
  }

  modalBg.style.display = 'flex';
  modal.classList.remove('pop'); 
  void modal.offsetWidth; 
  modal.classList.add('pop');
  modalBg.setAttribute('aria-hidden','false');
  
  // sonar campana suave al abrir (si est√° disponible)
  try { bellSound.currentTime = 0; bellSound.play().catch(()=>{}); } catch(e){ /* ignore */ }
}


/* locked modal (elegante y persistente) */
function showLockedModal(dayNum){
  modalTitle.textContent = '¬°A√∫n no disponible!';
  modalText.textContent = 'Esta casilla se abrir√° en su fecha. Vuelve entonces y descubrir√°s la sorpresa ‚ú®';
  modalExtra.innerHTML = '<div class="locked-modal"><div class="icon">üîí</div><div class="muted">Paciencia navide√±a</div></div>';
  modalBg.style.display = 'flex';
  modal.classList.remove('pop'); 
  void modal.offsetWidth; 
  modal.classList.add('pop');
  modalBg.setAttribute('aria-hidden','false');
}

/* locked feedback (peque√±a vibraci√≥n y pulso) */
function lockedFeedback(el){
  el.animate([{ transform:'scale(1)' },{ transform:'scale(1.03)' },{ transform:'scale(1)'}], { duration:260, easing:'ease-out' });
  if(navigator.vibrate) navigator.vibrate(60);
}

/* manejo de clicks (delegation) */
calendar.addEventListener('click', (ev) => {
  const d = ev.target.closest('.day');
  if(!d) return;
  const dayNum = parseInt(d.dataset.day,10);
  const unlocked = FORCE_UNLOCK || (dayNum <= today);
  if(!unlocked){
    lockedFeedback(d);
    showLockedModal(dayNum);
    return;
  }
  // abierto normal
  showModalFor(dayNum, ev);
});

/* close handlers */
closeBtn.addEventListener('click', ()=> {
  modalBg.style.display = 'none';
  modalBg.setAttribute('aria-hidden','true');
});
modalBg.addEventListener('click', (e)=> {
  if(e.target === modalBg){ 
    modalBg.style.display='none'; 
    modalBg.setAttribute('aria-hidden','true'); 
  }
});
document.addEventListener('keydown', (e)=> { 
  if(e.key === 'Escape') { 
    modalBg.style.display='none'; 
    modalBg.setAttribute('aria-hidden','true'); 
  } 
});

/* marcar visualmente locked al cargar */
(function markLocked(){
  if(FORCE_UNLOCK) return;
  document.querySelectorAll('.day').forEach(el=>{
    const d = parseInt(el.dataset.day,10);
    if(d > today) el.classList.add('locked');
  
    // A√ëADIR ESTAS L√çNEAS:
    const dayContent = content[d];
    if(dayContent && dayContent.image){
      el.style.backgroundImage = `linear-gradient(rgba(255,240,237,0.5), rgba(246,233,226,0.44)), url('${dayContent.image}')`;
    }
  });
})();

</script>
</body>
</html>
